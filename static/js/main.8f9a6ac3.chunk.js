(this["webpackJsonpcellular-automaton-visualisation"]=this["webpackJsonpcellular-automaton-visualisation"]||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(8),i=n.n(r),s=(n(14),n(6)),l=n(1),c=n(2),u=n(4),m=n(3),p=n(5),h="Jeu de la Vie",d="Variante color\xe9e",f=[h,d],v="Conway: Jeu de la Vie",g=[v,"Day & Night","HighLife"],y={speed:500,type:f[1],options:{variant:g[0],nbStates:3},play:!1},b={click:!1,cells:new Map},C={nbR:30,nbC:70,size:10},w="btn-success",E=1,k=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).updateValueSpecific=function(e,t){var a=Object(s.a)({},n.props.specific.get()),o=e.target.value;a[t]=o,n.props.specific.set(a)},n.updateValuesCore=function(e,t){var a=Object(s.a)({},n.props.core.get()),o=e.target.value;a[t]=o,n.props.core.set(a)},n.updateValuesOptionsAutomaton=function(e,t){var a=Object(s.a)({},n.props.specific.get()),o=Object(s.a)({},a.options),r=e.target.value;o[t]=r,a.options=o,n.props.specific.set(a)},n.playPauseButton=function(){var e="Play";return n.props.specific.get().play&&(e="Pause"),o.a.createElement("button",{type:"button",className:"btn ".concat(w," mx-").concat(E," col"),onClick:function(){return n.props.play()}},e)},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"displayOptionsFromList",value:function(e){return e.map((function(e){return o.a.createElement("option",{key:e},e)}))}},{key:"displayAutomatonOptions",value:function(){switch(this.props.specific.get().type){case h:return this.displayOptionsConway();case d:return this.displayOptionsImmigration()}}},{key:"displayOptionsConway",value:function(){var e=this,t=this.props.specific.get().options.variant;return o.a.createElement("div",{id:"OptionsConway"},o.a.createElement("hr",null),o.a.createElement("h3",null,"Jeu de la vie"),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Variante du Jeu de la Vie"),o.a.createElement("select",{className:"form-control",value:t,onChange:function(t){return e.updateValuesOptionsAutomaton(t,"variant")}},this.displayOptionsFromList(g))))}},{key:"displayOptionsImmigration",value:function(){var e=this,t=this.props.specific.get().options.nbStates;return o.a.createElement("div",{id:"OptionsImmigration"},o.a.createElement("hr",null),o.a.createElement("h3",null,"Jeu de l'Immigration"),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Nombre d'\xe9tats: ",t),o.a.createElement("input",{className:"form-control",type:"range",value:t,min:"3",max:8,step:"1",onChange:function(t){return e.updateValuesOptionsAutomaton(t,"nbStates")}})))}},{key:"render",value:function(){var e=this,t=this.props.specific.get(),n=t.speed,a=t.type,r=this.props.core.get(),i=r.size,s=r.nbC,l=r.nbR;return o.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},o.a.createElement("hr",null),o.a.createElement("h3",null,"Gestion de l'automate"),o.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center"},o.a.createElement("div",{id:"AutomatonSelection",className:"form-group col-5"},o.a.createElement("label",null,"Type d'automate"),o.a.createElement("select",{className:"form-control",value:a,onChange:function(t){return e.updateValueSpecific(t,"type")}},this.displayOptionsFromList(f))),o.a.createElement("div",{className:"row col-6"},o.a.createElement("button",{type:"button",className:"btn ".concat(w," mx-").concat(E," col"),onClick:function(){return e.props.clear()}},"Vider"),o.a.createElement("button",{type:"button",className:"btn ".concat(w," mx-").concat(E," col"),onClick:function(){return e.props.randomCells()}},"Al\xe9atoire"))),this.displayAutomatonOptions(),o.a.createElement("hr",null),o.a.createElement("h3",null,"Gestion de l'affichage"),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"form-group col-4"},o.a.createElement("label",null,"Lignes: ",l),o.a.createElement("input",{className:"form-control-range",type:"range",value:l,min:"1",max:"100",step:"1",onChange:function(t){return e.updateValuesCore(t,"nbR")}})),o.a.createElement("div",{className:"form-group col-4"},o.a.createElement("label",null,"Colonnes: ",s),o.a.createElement("input",{className:"form-control-range",type:"range",value:s,min:"1",max:"100",step:"1",onChange:function(t){return e.updateValuesCore(t,"nbC")}})),o.a.createElement("div",{className:"form-group col-4"},o.a.createElement("label",null,"Taille: ",i),o.a.createElement("input",{className:"form-control-range",type:"range",value:i,min:"5",max:"50",step:"1",onChange:function(t){return e.updateValuesCore(t,"size")}}))),o.a.createElement("hr",null),o.a.createElement("h3",null,"Gestion de la simulation"),o.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center"},o.a.createElement("div",{id:"SpeedSelection",className:"form-group col-5"},o.a.createElement("label",null,"Vitesse ",n/1e3,"s"),o.a.createElement("input",{className:"form-control-range",type:"range",value:n,min:"100",max:"1000",step:"100",onChange:function(t){return e.updateValueSpecific(t,"speed")}})),o.a.createElement("div",{id:"buttonsRow",className:"row col-6"},this.playPauseButton(),o.a.createElement("button",{type:"button",className:"btn ".concat(w," mx-").concat(E," col"),onClick:function(){return e.props.step()}},"Step"))))}}]),t}(o.a.Component),O=(n(15),function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"createClass",value:function(){var e=this.props.value;if(0<=e&&e<8)return"active".concat(e);console.error("Error in the value of the cell")}},{key:"render",value:function(){var e=this,t=this.props.position,n=t.indR,a=t.indC,r=this.props.size,i={height:"".concat(r,"px"),width:"".concat(r,"px")};return o.a.createElement("div",{onClick:function(){return e.props.handleClic(n,a)},onMouseEnter:function(){return e.props.handleEnter(n,a)},className:"bloc "+this.createClass(),style:i})}}]),t}(o.a.Component)),j=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).handleEnterNewBloc=function(e,t){n.props.specific.get().click&&n.props.changeValueCell(e,t)},n.handleUserClicInsideBloc=function(e,t){var a=n.props.specific.get();a.click=!a.click,a.click&&n.props.changeValueCell(e,t,a)},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"displayBlocs",value:function(){for(var e,t=this.props.core.get(),n=t.size,a=t.nbR,r=t.nbC,i=[],s=[],l=0;l<a;l++){s=[];for(var c=0;c<r;c++)e=this.props.getValueCell(l,c),s.push(o.a.createElement(O,{key:"R".concat(l,"C").concat(c),position:{indR:l,indC:c},value:e,handleClic:this.handleUserClicInsideBloc,handleEnter:this.handleEnterNewBloc,size:n}));i.push(o.a.createElement("div",{className:"d-flex justify-content-center align-items-center",key:"R".concat(l)},s))}return i}},{key:"render",value:function(){return o.a.createElement("div",null,this.displayBlocs())}}]),t}(o.a.Component),S=function(){function e(t,n,a,o,r,i){Object(l.a)(this,e),this.map=t,this.nbStates=n,this.nbR=a,this.nbC=o,this.keyFromCoordinates=r,this.coordinatesFromKey=i}return Object(c.a)(e,[{key:"getMap",value:function(){return this.map}},{key:"getValue",value:function(e,t){var n=this.map.get(this.keyFromCoordinates(e,t));return void 0===n?0:n}},{key:"randomBoard",value:function(){for(var e=new Map,t=null,n=null,a=0;a<this.nbR;a++)for(var o=0;o<this.nbC;o++)t=this.keyFromCoordinates(a,o),0!==(n=Math.floor(Math.random()*Math.floor(this.nbStates)))&&e.set(t,n);return this.map=e,e}},{key:"next",value:function(){var e,t,n=this,a=new Map;return this.map.forEach((function(o,r){for(var i=n.coordinatesFromKey(r),s=i.indR,l=i.indC,c=s-1;c<=s+1;c++)for(var u=l-1;u<=l+1;u++)0!==(e=n.rules(c,u))&&(t=n.keyFromCoordinates(c,u),a.delete(t),a.set(t,e))})),this.map=a,a}},{key:"checkCells",value:function(){for(var e=this.map.values(),t=0;t<this.map.size;t++)if(!this.checkValue(e.next().value))return!1;return!0}},{key:"checkValue",value:function(e){return 0<=e&&e<this.nbStates}},{key:"rules",value:function(e,t){}},{key:"changeValue",value:function(e,t){return(this.getValue(e,t)+1)%this.nbStates}},{key:"countNeighbours",value:function(e,t,n){for(var a=0,o=e-1;o<=e+1;o++)for(var r=t-1;r<=t+1;r++)o===e&&r===t||this.getValue(o,r)===n&&(a+=1);return a}}]),e}(),V=function(e){function t(e,n,a,o,r,i){var s;return Object(l.a)(this,t),(s=Object(u.a)(this,Object(m.a)(t).call(this,e,2,n,a,o,r))).variant=i,s}return Object(p.a)(t,e),Object(c.a)(t,[{key:"rules",value:function(e,t){var n=this.countNeighbours(e,t,1),a=this.getValue(e,t),o=0;switch(this.variant){case v:o=this.rulesConway(a,n);break;case"Day & Night":o=this.rulesDayNight(a,n);break;case"HighLife":o=this.rulesHighLife(a,n);break;default:console.error("Error in the variant selection")}return o}},{key:"rulesConway",value:function(e,t){return 3===t?1:2===t?e:0}},{key:"rulesDayNight",value:function(e,t){var n=8-t;return 0===e?3===n||6===n||7===n||8===n?1:0:3===t||4===t||6===t||7===t||8===t?1:0}},{key:"rulesHighLife",value:function(e,t){if(0===e){if(3===t||6===t)return 1}else if(2===t||3===t)return 1;return 0}}]),t}(S),N=function(e){function t(e,n,a,o,r,i){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).call(this,e,i,n,a,o,r))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"rules",value:function(e,t){var n=this.getValue(e,t),a=this.changeValue(e,t);return this.countNeighbours(e,t,a)>=3?a:n}}]),t}(S),A=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).stopAnimation=function(){null!==n.animation&&(clearInterval(n.animation),n.animation=null)},n.startAnimation=function(){n.animation=setInterval(n.stepAutomaton,n.state.controls.speed)},n.changeValueAnimation=function(){null!==n.animation&&(n.stopAnimation(),n.startAnimation())},n.handlePlayPause=function(){null===n.animation?n.startAnimation():n.stopAnimation();var e=n.state;e.controls.play=!e.controls.play,n.setState(e)},n.initAutomaton=function(){switch(n.state.controls.type){case h:n.automaton=new V(n.state.windows.cells,n.state.core.nbR,n.state.core.nbC,n.getKeyFromCoordinates,n.getCoordinatesFromKey,n.state.controls.options.variant);break;case d:n.automaton=new N(n.state.windows.cells,n.state.core.nbR,n.state.core.nbC,n.getKeyFromCoordinates,n.getCoordinatesFromKey,n.state.controls.options.nbStates);break;default:console.error("Error in the Automaton selection")}n.automaton.checkCells()||n.clearCells()},n.stepAutomaton=function(){null===n.automaton&&n.initAutomaton();var e=n.getStateWindows();e.cells=n.automaton.next(),n.setStateWindows(e)},n.getKeyFromCoordinates=function(e,t){return"R".concat(e,"C").concat(t)},n.getCoordinatesFromKey=function(e){for(var t=1,n="",a="";"C"!==e[t];)n+=e[t],t++;for(t+=1;t<e.length;t++)a+=e[t];return{indR:n=parseInt(n,10),indC:a=parseInt(a,10)}},n.getValueCell=function(e,t){var a=n.state.windows.cells.get(n.getKeyFromCoordinates(e,t));return void 0===a?0:a},n.getNewValue=function(e,t){return n.automaton.changeValue(e,t)},n.changeValueCell=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=a;null===o&&(o=n.getStateWindows());var r=n.getNewValue(e,t),i=n.getKeyFromCoordinates(e,t);o.cells.delete(i),o.cells.set(i,r),n.setStateWindows(o)},n.randomCells=function(){n.initAutomaton();var e=n.getStateWindows();e.cells=n.automaton.randomBoard(),n.setStateWindows(e)},n.handleResize=function(){var e=window.innerWidth,t=window.innerHeight,a=n.state;a.test={w:e,h:t},n.setState(a)},n.resizeCells=function(e,t){for(var a=[],o=[],r=n.state.windows.cells,i=0;i<e;i++){o=[];for(var s=0;s<t;s++)s<r[0].length&&i<r.length?o.push(r[i][s]):o.push(0);a.push(o)}return a},n.clearCells=function(){var e=n.state;e.windows.cells=n.emptyCells(),n.initAutomaton(),n.setState(e)},n.emptyCells=function(){return new Map},n.setStateCore=function(e){var t=n.state,a=void 0;t.core.nbC===e.nbC&&t.core.nbR===e.nbR||(a=n.initAutomaton),t.core=e,n.setState(t,a)},n.setStateWindows=function(e){var t=n.state;t.windows=e,n.setState(t)},n.setStateControls=function(e){var t=n.state,a=void 0;t.controls.speed!==e.speed&&(a=n.changeValueAnimation),t.controls.type!==e.type&&(a=n.initAutomaton),t.controls.options!==e.options&&(a=n.initAutomaton),t.controls=e,n.setState(t,a)},n.getCoreState=function(){return n.state.core},n.getStateWindows=function(){return n.state.windows},n.getStateControls=function(){return n.state.controls},n.automaton=null,n.animation=null,n.state={controls:Object(s.a)({},y),windows:Object(s.a)({},b),core:Object(s.a)({},C),test:{w:0,h:0}},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.handleResize(),window.addEventListener("resize",this.handleResize),this.initAutomaton()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"Automate Cellulaire"),o.a.createElement("div",null,o.a.createElement("h2",null,"Test Resize ",this.state.test.w," x ",this.state.test.h),o.a.createElement("h2",null,"Nombre de cellules: ",this.state.windows.cells.size)),o.a.createElement(j,{specific:{get:this.getStateWindows,set:this.setStateWindows},core:{get:this.getCoreState,set:this.setStateCore},changeValueCell:this.changeValueCell,getKeyFromCoordinates:this.getKeyFromCoordinates,getValueCell:this.getValueCell}),o.a.createElement(k,{specific:{get:this.getStateControls,set:this.setStateControls},core:{get:this.getCoreState,set:this.setStateCore},step:this.stepAutomaton,clear:this.clearCells,play:this.handlePlayPause,randomCells:this.randomCells}))}}]),t}(o.a.Component);var R=function(){return o.a.createElement("main",{className:"container"},o.a.createElement(A,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},9:function(e,t,n){e.exports=n(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.8f9a6ac3.chunk.js.map