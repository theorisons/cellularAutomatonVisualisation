(this["webpackJsonpcellular-automaton-visualisation"]=this["webpackJsonpcellular-automaton-visualisation"]||[]).push([[0],{10:function(e,t,n){e.exports=n(17)},15:function(e,t,n){},16:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(9),l=n.n(r),s=(n(15),n(1)),i=n(2),c=n(3),u=n(5),p=n(4),m=n(6),h=n(7),v="Jeu de la Vie",f="Variante color\xe9e",d=[v,f],b={name:"Personnalis\xe9e",rules:{born:[!1,!1,!1,!1,!1,!1,!1,!1,!1],survive:[!1,!1,!1,!1,!1,!1,!1,!1,!1]}},g=[b,{name:"Conway: Jeu de la Vie",rules:{born:[!1,!1,!1,!0,!1,!1,!1,!1,!1],survive:[!1,!1,!0,!0,!1,!1,!1,!1,!1]}},{name:"Day & Night",rules:{born:[!1,!1,!1,!0,!1,!1,!0,!0,!0],survive:[!1,!1,!1,!0,!0,!1,!0,!0,!0]}},{name:"HighLife",rules:{born:[!1,!1,!1,!0,!1,!1,!0,!1,!1],survive:[!1,!1,!0,!0,!1,!1,!1,!1,!1]}}],C={speed:500,type:d[0],options:{variant:Object(s.a)({},g[1]),nbStates:3},play:!1},y={click:!1,cells:new Map},E={nbR:20,nbC:20,size:15},O="btn-success",w=1,k=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).updateValueSpecific=function(e,t){var a=Object(s.a)({},n.props.specific.get()),o=e.target.value;a[t]=o,n.props.specific.set(a)},n.updateValuesCore=function(e,t){var a=Object(s.a)({},n.props.core.get()),o=e.target.value;a[t]=o,n.props.core.set(a)},n.updateValuesOptionsAutomaton=function(e,t){var a=Object(s.a)({},n.props.specific.get()),o=Object(s.a)({},a.options),r=e.target.value;o[t]=r,a.options=o,n.props.specific.set(a)},n.updateValuesOptionsRules=function(e,t){var a=Object(s.a)({},n.props.specific.get());a.options=Object(s.a)({},a.options,{variant:{name:b.name,rules:{born:Object(h.a)(a.options.variant.rules.born),survive:Object(h.a)(a.options.variant.rules.survive)}}}),a.options.variant.rules[e][t]=!a.options.variant.rules[e][t],n.props.specific.set(a)},n.playPauseButton=function(){var e="Play";return n.props.specific.get().play&&(e="Pause"),o.a.createElement("button",{type:"button",className:"btn ".concat(O," mx-").concat(w," col"),onClick:function(){return n.props.play()}},e)},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"displayOptionsFromList",value:function(e){return e.map((function(e){return"string"===typeof e?o.a.createElement("option",{key:e},e):o.a.createElement("option",{key:e.name},e.name)}))}},{key:"updateVariantAutomaton",value:function(e){for(var t=Object(s.a)({},this.props.specific.get()),n=e.target.value,a=0;a<g.length;a++)g[a].name===n&&(t.options=Object(s.a)({},t.options,{variant:{name:g[a].name,rules:{born:Object(h.a)(g[a].rules.born),survive:Object(h.a)(g[a].rules.survive)}}}));this.props.specific.set(t)}},{key:"displayAutomatonOptions",value:function(){switch(this.props.specific.get().type){case v:return this.displayOptionsConway();case f:return this.displayOptionsColoredVariant()}}},{key:"displayCheckBox",value:function(e,t){for(var n=this,a=[],r=function(r){a.push(o.a.createElement("div",{key:"".concat(t).concat(r),className:"custom-control custom-switch"},o.a.createElement("input",{type:"checkbox",className:"custom-control-input",checked:e[r],readOnly:!0}),o.a.createElement("label",{className:"custom-control-label",onClick:function(){return n.updateValuesOptionsRules(t,r)}},r)))},l=0;l<=8;l++)r(l);return a}},{key:"displayOptionsConway",value:function(){var e=this,t=this.props.specific.get().options.variant;return o.a.createElement("div",{id:"OptionsConway"},o.a.createElement("hr",null),o.a.createElement("h3",null,"Jeu de la vie"),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Variante du Jeu de la Vie"),o.a.createElement("select",{className:"form-control",value:t.name,onChange:function(t){return e.updateVariantAutomaton(t)}},this.displayOptionsFromList(g))),o.a.createElement("div",{className:"row no-gutters"},o.a.createElement("div",{className:"col-6"},o.a.createElement("h4",null,"Cellule nait"),this.displayCheckBox(t.rules.born,"born")),o.a.createElement("div",{className:"col-6"},o.a.createElement("h4",null,"Cellule survit"),this.displayCheckBox(t.rules.survive,"survive")),o.a.createElement("h5",null,"Selection du nombre de voisins vivants")))}},{key:"displayOptionsColoredVariant",value:function(){var e=this,t=this.props.specific.get().options.nbStates;return o.a.createElement("div",{id:"OptionsColoredVariant"},o.a.createElement("hr",null),o.a.createElement("h3",null,"Variante \xe0 plusieurs \xe9tats"),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Nombre d'\xe9tats: ",t),o.a.createElement("input",{className:"form-control",type:"range",value:t,min:"3",max:8,step:"1",onChange:function(t){return e.updateValuesOptionsAutomaton(t,"nbStates")}})))}},{key:"render",value:function(){var e=this,t=this.props.specific.get(),n=t.speed,a=t.type,r=this.props.core.get(),l=r.size,s=r.nbC,i=r.nbR;return o.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},o.a.createElement("hr",null),o.a.createElement("h3",null,"Gestion de l'affichage"),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"form-group col-4"},o.a.createElement("label",null,"Lignes: ",i),o.a.createElement("input",{className:"form-control-range",type:"range",value:i,min:"1",max:"100",step:"1",onChange:function(t){return e.updateValuesCore(t,"nbR")}})),o.a.createElement("div",{className:"form-group col-4"},o.a.createElement("label",null,"Colonnes: ",s),o.a.createElement("input",{className:"form-control-range",type:"range",value:s,min:"1",max:"100",step:"1",onChange:function(t){return e.updateValuesCore(t,"nbC")}})),o.a.createElement("div",{className:"form-group col-4"},o.a.createElement("label",null,"Taille: ",l),o.a.createElement("input",{className:"form-control-range",type:"range",value:l,min:"5",max:"50",step:"1",onChange:function(t){return e.updateValuesCore(t,"size")}}))),o.a.createElement("hr",null),o.a.createElement("h3",null,"Gestion de la simulation"),o.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center"},o.a.createElement("div",{id:"SpeedSelection",className:"form-group col-5"},o.a.createElement("label",null,"Vitesse ",n/1e3,"s"),o.a.createElement("input",{className:"form-control-range",type:"range",value:n,min:"100",max:"1000",step:"100",onChange:function(t){return e.updateValueSpecific(t,"speed")}})),o.a.createElement("div",{id:"buttonsRow",className:"row col-6"},this.playPauseButton(),o.a.createElement("button",{type:"button",className:"btn ".concat(O," mx-").concat(w," col"),onClick:function(){return e.props.step()}},"Step"))),o.a.createElement("hr",null),o.a.createElement("h3",null,"Gestion de l'automate"),o.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center"},o.a.createElement("div",{id:"AutomatonSelection",className:"form-group col-5"},o.a.createElement("label",null,"Type d'automate"),o.a.createElement("select",{className:"form-control",value:a,onChange:function(t){return e.updateValueSpecific(t,"type")}},this.displayOptionsFromList(d))),o.a.createElement("div",{className:"row col-6"},o.a.createElement("button",{type:"button",className:"btn ".concat(O," mx-").concat(w," col"),onClick:function(){return e.props.clear()}},"Vider"),o.a.createElement("button",{type:"button",className:"btn ".concat(O," mx-").concat(w," col"),onClick:function(){return e.props.randomCells()}},"Al\xe9atoire"))),this.displayAutomatonOptions())}}]),t}(o.a.Component),j=(n(16),function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"createClass",value:function(){var e=this.props.value;if(0<=e&&e<8)return"active".concat(e);console.error("Error in the value of the cell")}},{key:"render",value:function(){var e=this,t=this.props.position,n=t.indR,a=t.indC,r=this.props.size,l={height:"".concat(r,"px"),width:"".concat(r,"px")};return o.a.createElement("div",{onClick:function(){return e.props.handleClic(n,a)},onMouseEnter:function(){return e.props.handleEnter(n,a)},className:"bloc "+this.createClass(),style:l})}}]),t}(o.a.Component)),S=function(e,t){return"R".concat(e,"C").concat(t)},V=function(e,t,n){var a=n.get(S(e,t));return void 0===a?0:a},N=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).handleEnterNewBloc=function(e,t){n.props.specific.get().click&&n.props.changeValueCell(e,t)},n.handleUserClicInsideBloc=function(e,t){var a=n.props.specific.get();a.click=!a.click,a.click&&n.props.changeValueCell(e,t,a)},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"displayBlocs",value:function(){for(var e,t=this.props.core.get(),n=t.size,a=t.nbR,r=t.nbC,l=this.props.specific.get().cells,s=[],i=[],c=0;c<a;c++){i=[];for(var u=0;u<r;u++)e=V(c,u,l),i.push(o.a.createElement(j,{key:"R".concat(c,"C").concat(u),position:{indR:c,indC:u},value:e,handleClic:this.handleUserClicInsideBloc,handleEnter:this.handleEnterNewBloc,size:n}));s.push(o.a.createElement("div",{className:"d-flex justify-content-center align-items-center",key:"R".concat(c)},i))}return s}},{key:"render",value:function(){return o.a.createElement("div",null,this.displayBlocs())}}]),t}(o.a.Component),A=function(){function e(t,n,a,o){Object(i.a)(this,e),this.map=t,this.nbStates=n,this.nbR=a,this.nbC=o}return Object(c.a)(e,[{key:"getValueCell",value:function(e,t){return V(e,t,this.map)}},{key:"randomBoard",value:function(){for(var e=new Map,t=null,n=null,a=0;a<this.nbR;a++)for(var o=0;o<this.nbC;o++)t=S(a,o),0!==(n=Math.floor(Math.random()*Math.floor(this.nbStates)))&&e.set(t,n);return this.map=e,e}},{key:"next",value:function(){var e,t,n=this,a=new Map;return this.map.forEach((function(o,r){for(var l=function(e){for(var t=1,n="",a="";"C"!==e[t];)n+=e[t],t++;for(t+=1;t<e.length;t++)a+=e[t];return{indR:n=parseInt(n,10),indC:a=parseInt(a,10)}}(r),s=l.indR,i=l.indC,c=s-1;c<=s+1;c++)for(var u=i-1;u<=i+1;u++)0!==(e=n.rules(c,u))&&(t=S(c,u),a.delete(t),a.set(t,e))})),this.map=a,a}},{key:"checkCells",value:function(){for(var e=this.map.values(),t=0;t<this.map.size;t++)if(!this.checkValue(e.next().value))return!1;return!0}},{key:"checkValue",value:function(e){return 0<=e&&e<this.nbStates}},{key:"rules",value:function(e,t){}},{key:"changeValue",value:function(e,t){return(this.getValueCell(e,t)+1)%this.nbStates}},{key:"countNeighbours",value:function(e,t,n){for(var a=0,o=e-1;o<=e+1;o++)for(var r=t-1;r<=t+1;r++)o===e&&r===t||this.getValueCell(o,r)===n&&(a+=1);return a}}]),e}(),x=function(e){function t(e,n,a,o){var r;return Object(i.a)(this,t),(r=Object(u.a)(this,Object(p.a)(t).call(this,e,2,n,a))).born=o.born,r.survive=o.survive,r}return Object(m.a)(t,e),Object(c.a)(t,[{key:"rules",value:function(e,t){var n=this.getValueCell(e,t),a=this.countNeighbours(e,t,1);return this.ruleForCell(n,a)}},{key:"ruleForCell",value:function(e,t){return 0===e?this.born[t]?1:0:this.survive[t]?1:0}}]),t}(A),R=function(e){function t(e,n,a,o){return Object(i.a)(this,t),Object(u.a)(this,Object(p.a)(t).call(this,e,o,n,a))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"rules",value:function(e,t){var n=this.getValueCell(e,t),a=this.changeValue(e,t);return this.countNeighbours(e,t,a)>=3?a:n}}]),t}(A),B=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).stopAnimation=function(){null!==n.animation&&(clearInterval(n.animation),n.animation=null)},n.startAnimation=function(){n.animation=setInterval(n.stepAutomaton,n.state.controls.speed)},n.changeValueAnimation=function(){null!==n.animation&&(n.stopAnimation(),n.startAnimation())},n.handlePlayPause=function(){null===n.animation?n.startAnimation():n.stopAnimation();var e=n.getStateControls();e.play=!e.play,n.setStateControls(e)},n.initAutomaton=function(){switch(n.state.controls.type){case v:n.automaton=new x(n.state.windows.cells,n.state.core.nbR,n.state.core.nbC,n.state.controls.options.variant.rules);break;case f:n.automaton=new R(n.state.windows.cells,n.state.core.nbR,n.state.core.nbC,n.state.controls.options.nbStates);break;default:console.error("Error in the Automaton selection")}n.automaton.checkCells()||n.clearCells()},n.stepAutomaton=function(){var e=n.getStateWindows();e.cells=n.automaton.next(),n.setStateWindows(e)},n.getNewValue=function(e,t){return n.automaton.changeValue(e,t)},n.changeValueCell=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=a;null===o&&(o=n.getStateWindows());var r=n.getNewValue(e,t),l=S(e,t);o.cells.delete(l),o.cells.set(l,r),n.setStateWindows(o)},n.clearCells=function(){var e=n.state;e.windows.cells=n.emptyCells(),n.initAutomaton(),n.setState(e)},n.emptyCells=function(){return new Map},n.randomCells=function(){n.initAutomaton();var e=n.getStateWindows();e.cells=n.automaton.randomBoard(),n.setStateWindows(e)},n.setStateCore=function(e){var t=n.state,a=void 0;t.core.nbC===e.nbC&&t.core.nbR===e.nbR||(a=n.initAutomaton),t.core=e,n.setState(t,a)},n.setStateWindows=function(e){var t=n.state;t.windows=e,n.setState(t)},n.setStateControls=function(e){var t=n.state,a=void 0;t.controls.speed!==e.speed&&(a=n.changeValueAnimation),t.controls.type===e.type&&t.controls.options.variant.name===e.options.variant.name&&t.controls.options.variant.rules===e.options.variant.rules||(a=n.initAutomaton),t.controls=e,n.setState(t,a)},n.getCoreState=function(){return n.state.core},n.getStateWindows=function(){return n.state.windows},n.getStateControls=function(){return n.state.controls},n.automaton=null,n.animation=null,n.state={controls:Object(s.a)({},C),windows:Object(s.a)({},y),core:Object(s.a)({},E)},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.initAutomaton()}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"Automate Cellulaire"),o.a.createElement("div",null,o.a.createElement("h2",null,"Nombre de cellules: ",this.state.windows.cells.size)),o.a.createElement(N,{specific:{get:this.getStateWindows,set:this.setStateWindows},core:{get:this.getCoreState,set:this.setStateCore},changeValueCell:this.changeValueCell}),o.a.createElement(k,{specific:{get:this.getStateControls,set:this.setStateControls},core:{get:this.getCoreState,set:this.setStateCore},play:this.handlePlayPause,step:this.stepAutomaton,clear:this.clearCells,randomCells:this.randomCells}))}}]),t}(o.a.Component);var W=function(){return o.a.createElement("main",{className:"container"},o.a.createElement(B,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[10,1,2]]]);
//# sourceMappingURL=main.78c25818.chunk.js.map