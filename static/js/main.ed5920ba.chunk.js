(this["webpackJsonpcellular-automaton-visualisation"]=this["webpackJsonpcellular-automaton-visualisation"]||[]).push([[0],{10:function(e,t,n){e.exports=n(17)},15:function(e,t,n){},16:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(9),l=n.n(o),s=(n(15),n(3)),i=n(1),c=n(2),u=n(5),m=n(4),p=n(6),h=n(7),v={name:"Personnalis\xe9e",rules:{born:[!1,!1,!1,!1,!1,!1,!1,!1,!1],survive:[!1,!1,!1,!1,!1,!1,!1,!1,!1]}},f=[v,{name:"Conway: Jeu de la Vie (B2/S23)",rules:{born:[!1,!1,!1,!0,!1,!1,!1,!1,!1],survive:[!1,!1,!0,!0,!1,!1,!1,!1,!1]}},{name:"Day & Night (B3678/S34678)",rules:{born:[!1,!1,!1,!0,!1,!1,!0,!0,!0],survive:[!1,!1,!1,!0,!0,!1,!0,!0,!0]}},{name:"HighLife (B36/S23)",rules:{born:[!1,!1,!1,!0,!1,!1,!0,!1,!1],survive:[!1,!1,!0,!0,!1,!1,!1,!1,!1]}}],d={speed:500,variant:Object(s.a)({},f[1]),play:!1},b={click:!1,cells:new Map},g={nbR:20,nbC:20,size:15},C="btn-success",y=1,E=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).updateValueSpecific=function(e,t){var a=Object(s.a)({},n.props.specific.get()),r=e.target.value;a[t]=r,n.props.specific.set(a)},n.updateValuesCore=function(e,t){var a=Object(s.a)({},n.props.core.get()),r=e.target.value;a[t]=r,n.props.core.set(a)},n.updateValuesOptionsRules=function(e,t){var a=Object(s.a)({},n.props.specific.get());a.variant={name:v.name,rules:{born:Object(h.a)(a.variant.rules.born),survive:Object(h.a)(a.variant.rules.survive)}},a.variant.rules[e][t]=!a.variant.rules[e][t],n.props.specific.set(a)},n.playPauseButton=function(){var e="Play";return n.props.specific.get().play&&(e="Pause"),r.a.createElement("button",{type:"button",className:"btn ".concat(C," mx-").concat(y," col"),onClick:function(){return n.props.play()}},e)},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"displayOptionsFromList",value:function(e){return e.map((function(e){return"string"===typeof e?r.a.createElement("option",{key:e},e):r.a.createElement("option",{key:e.name},e.name)}))}},{key:"updateVariantAutomaton",value:function(e){for(var t=Object(s.a)({},this.props.specific.get()),n=e.target.value,a=0;a<f.length;a++)f[a].name===n&&(t.variant={name:f[a].name,rules:{born:Object(h.a)(f[a].rules.born),survive:Object(h.a)(f[a].rules.survive)}});this.props.specific.set(t)}},{key:"displayCheckBox",value:function(e,t){for(var n=this,a=[],o=function(o){a.push(r.a.createElement("div",{key:"".concat(t).concat(o),className:"custom-control custom-switch"},r.a.createElement("input",{type:"checkbox",className:"custom-control-input",checked:e[o],readOnly:!0}),r.a.createElement("label",{className:"custom-control-label",onClick:function(){return n.updateValuesOptionsRules(t,o)}},o)))},l=0;l<=8;l++)o(l);return a}},{key:"render",value:function(){var e=this,t=this.props.specific.get(),n=t.speed,a=t.variant,o=this.props.core.get(),l=o.size,s=o.nbC,i=o.nbR;return r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},r.a.createElement("hr",null),r.a.createElement("h3",null,"Gestion de l'affichage"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("label",null,"Lignes: ",i),r.a.createElement("input",{className:"form-control-range",type:"range",value:i,min:"1",max:"100",step:"1",onChange:function(t){return e.updateValuesCore(t,"nbR")}})),r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("label",null,"Colonnes: ",s),r.a.createElement("input",{className:"form-control-range",type:"range",value:s,min:"1",max:"100",step:"1",onChange:function(t){return e.updateValuesCore(t,"nbC")}})),r.a.createElement("div",{className:"form-group col-4"},r.a.createElement("label",null,"Taille: ",l),r.a.createElement("input",{className:"form-control-range",type:"range",value:l,min:"5",max:"50",step:"1",onChange:function(t){return e.updateValuesCore(t,"size")}}))),r.a.createElement("hr",null),r.a.createElement("h3",null,"Gestion de la simulation"),r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center"},r.a.createElement("div",{id:"SpeedSelection",className:"form-group col-5"},r.a.createElement("label",null,"Vitesse ",n/1e3,"s"),r.a.createElement("input",{className:"form-control-range",type:"range",value:n,min:"100",max:"1000",step:"100",onChange:function(t){return e.updateValueSpecific(t,"speed")}})),r.a.createElement("div",{id:"buttonsRow",className:"row col-6"},this.playPauseButton(),r.a.createElement("button",{type:"button",className:"btn ".concat(C," mx-").concat(y," col"),onClick:function(){return e.props.step()}},"Step"))),r.a.createElement("hr",null),r.a.createElement("h3",null,"Gestion des r\xe8gles"),r.a.createElement("div",{className:"row no-gutters justify-content-between align-items-center"},r.a.createElement("div",{id:"AutomatonSelection",className:"form-group col-5"},r.a.createElement("label",null,"Variante du Jeu de la Vie"),r.a.createElement("select",{className:"form-control",value:a.name,onChange:function(t){return e.updateVariantAutomaton(t)}},this.displayOptionsFromList(f))),r.a.createElement("div",{className:"row col-6"},r.a.createElement("button",{type:"button",className:"btn ".concat(C," mx-").concat(y," col"),onClick:function(){return e.props.clear()}},"Vider"),r.a.createElement("button",{type:"button",className:"btn ".concat(C," mx-").concat(y," col"),onClick:function(){return e.props.randomCells()}},"Al\xe9atoire")),r.a.createElement("div",{className:"col-7"},r.a.createElement("h4",null,"Cellule nait"),this.displayCheckBox(a.rules.born,"born")),r.a.createElement("div",{className:"col-5"},r.a.createElement("h4",null,"Cellule survit"),this.displayCheckBox(a.rules.survive,"survive")),r.a.createElement("h5",null,"Selection du nombre de voisins vivants n\xe9cessaire")))}}]),t}(r.a.Component),w=(n(16),function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"createClass",value:function(){var e=this.props.value;if(0<=e&&e<2)return"active".concat(e);console.error("Error in the value of the cell")}},{key:"render",value:function(){var e=this,t=this.props.position,n=t.indR,a=t.indC,o=this.props.size,l={height:"".concat(o,"px"),width:"".concat(o,"px")};return r.a.createElement("div",{onClick:function(){return e.props.handleClic(n,a)},onMouseEnter:function(){return e.props.handleEnter(n,a)},className:"bloc "+this.createClass(),style:l})}}]),t}(r.a.Component)),O=function(e,t){return"R".concat(e,"C").concat(t)},k=function(e,t,n){var a=n.get(O(e,t));return void 0===a?0:a},j=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleEnterNewBloc=function(e,t){n.props.specific.get().click&&n.props.changeValueCell(e,t)},n.handleUserClicInsideBloc=function(e,t){var a=n.props.specific.get();a.click=!a.click,a.click&&n.props.changeValueCell(e,t,a)},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"displayBlocs",value:function(){for(var e,t=this.props.core.get(),n=t.size,a=t.nbR,o=t.nbC,l=this.props.specific.get().cells,s=[],i=[],c=0;c<a;c++){i=[];for(var u=0;u<o;u++)e=k(c,u,l),i.push(r.a.createElement(w,{key:"R".concat(c,"C").concat(u),position:{indR:c,indC:u},value:e,handleClic:this.handleUserClicInsideBloc,handleEnter:this.handleEnterNewBloc,size:n}));s.push(r.a.createElement("div",{className:"d-flex justify-content-center align-items-center",key:"R".concat(c)},i))}return s}},{key:"render",value:function(){return r.a.createElement("div",null,this.displayBlocs())}}]),t}(r.a.Component),S=function(e){function t(e,n,a,r){var o;return Object(i.a)(this,t),(o=Object(u.a)(this,Object(m.a)(t).call(this,e,2,n,a))).born=r.born,o.survive=r.survive,o}return Object(p.a)(t,e),Object(c.a)(t,[{key:"rules",value:function(e,t){var n=this.getValueCell(e,t),a=this.countNeighbours(e,t,1);return this.ruleForCell(n,a)}},{key:"ruleForCell",value:function(e,t){return 0===e?this.born[t]?1:0:this.survive[t]?1:0}}]),t}(function(){function e(t,n,a,r){Object(i.a)(this,e),this.map=t,this.nbStates=n,this.nbR=a,this.nbC=r}return Object(c.a)(e,[{key:"getValueCell",value:function(e,t){return k(e,t,this.map)}},{key:"randomBoard",value:function(){for(var e=new Map,t=null,n=null,a=0;a<this.nbR;a++)for(var r=0;r<this.nbC;r++)t=O(a,r),0!==(n=Math.floor(Math.random()*Math.floor(this.nbStates)))&&e.set(t,n);return this.map=e,e}},{key:"next",value:function(){var e,t,n=this,a=new Map;return this.map.forEach((function(r,o){for(var l=function(e){for(var t=1,n="",a="";"C"!==e[t];)n+=e[t],t++;for(t+=1;t<e.length;t++)a+=e[t];return{indR:n=parseInt(n,10),indC:a=parseInt(a,10)}}(o),s=l.indR,i=l.indC,c=s-1;c<=s+1;c++)for(var u=i-1;u<=i+1;u++)0!==(e=n.rules(c,u))&&(t=O(c,u),a.delete(t),a.set(t,e))})),this.map=a,a}},{key:"rules",value:function(e,t){}},{key:"changeValue",value:function(e,t){return(this.getValueCell(e,t)+1)%this.nbStates}},{key:"countNeighbours",value:function(e,t,n){for(var a=0,r=e-1;r<=e+1;r++)for(var o=t-1;o<=t+1;o++)r===e&&o===t||this.getValueCell(r,o)===n&&(a+=1);return a}}]),e}()),N=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).stopAnimation=function(){null!==n.animation&&(clearInterval(n.animation),n.animation=null)},n.startAnimation=function(){n.animation=setInterval(n.stepAutomaton,n.state.controls.speed)},n.changeValueAnimation=function(){null!==n.animation&&(n.stopAnimation(),n.startAnimation())},n.handlePlayPause=function(){null===n.animation?n.startAnimation():n.stopAnimation();var e=n.getStateControls();e.play=!e.play,n.setStateControls(e)},n.initAutomaton=function(){n.automaton=new S(n.state.windows.cells,n.state.core.nbR,n.state.core.nbC,n.state.controls.variant.rules)},n.stepAutomaton=function(){var e=n.getStateWindows();e.cells=n.automaton.next(),n.setStateWindows(e)},n.getNewValue=function(e,t){return n.automaton.changeValue(e,t)},n.changeValueCell=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=a;null===r&&(r=n.getStateWindows());var o=n.getNewValue(e,t),l=O(e,t);r.cells.delete(l),r.cells.set(l,o),n.setStateWindows(r)},n.clearCells=function(){var e=n.state;e.windows.cells=n.emptyCells(),n.initAutomaton(),n.setState(e)},n.emptyCells=function(){return new Map},n.randomCells=function(){var e=n.getStateWindows();e.cells=n.automaton.randomBoard(),n.setStateWindows(e)},n.setStateCore=function(e){var t=n.state,a=void 0;t.core.nbC===e.nbC&&t.core.nbR===e.nbR||(a=n.initAutomaton),t.core=e,n.setState(t,a)},n.setStateWindows=function(e){var t=n.state;t.windows=e,n.setState(t)},n.setStateControls=function(e){var t=n.state,a=void 0;t.controls.speed!==e.speed&&(a=n.changeValueAnimation),t.controls.variant.name===e.variant.name&&t.controls.variant.rules===e.variant.rules||(a=n.initAutomaton),t.controls=e,n.setState(t,a)},n.getCoreState=function(){return n.state.core},n.getStateWindows=function(){return n.state.windows},n.getStateControls=function(){return n.state.controls},n.automaton=null,n.animation=null,n.state={controls:Object(s.a)({},d),windows:Object(s.a)({},b),core:Object(s.a)({},g)},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.initAutomaton()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Automate Cellulaire"),r.a.createElement("div",null,r.a.createElement("h2",null,"Nombre de cellules: ",this.state.windows.cells.size)),r.a.createElement(j,{specific:{get:this.getStateWindows,set:this.setStateWindows},core:{get:this.getCoreState,set:this.setStateCore},changeValueCell:this.changeValueCell}),r.a.createElement(E,{specific:{get:this.getStateControls,set:this.setStateControls},core:{get:this.getCoreState,set:this.setStateCore},play:this.handlePlayPause,step:this.stepAutomaton,clear:this.clearCells,randomCells:this.randomCells}))}}]),t}(r.a.Component);var V=function(){return r.a.createElement("main",{className:"container"},r.a.createElement(N,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(V,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[10,1,2]]]);
//# sourceMappingURL=main.ed5920ba.chunk.js.map